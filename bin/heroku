#!/usr/bin/env ruby

$LOAD_PATH.unshift(File.dirname(__FILE__) + '/../lib')

require 'heroku'
require 'heroku/command_line'

usage = <<EOTXT
=== Heroku Commands
  list - list my apps
  create [name] - create a new app
    --origin [url] - animate code from a public git repository
  clone [name] - make a clone of a heroku app for local development
  info [name] - details about the app
  update [name] - updates existing app. options are:
    --name [newname]
    --public (true|false)
    --mode (production|development)
    --domain-name [somedomain.example.com]
  collaborators [name] - view or update collaborators
    --add [email]
    --remove [email]
    --access (edit|view)
  rake - remotely execute a rake command
  db:import - import db/data.yml into the Heroku app's database
  db:export - export the Heroku app's database to db/data.yml
  destroy [name] - destroy an app
  keys - manage your user's ssh public keys for git access
    --add [path to keyfile, or blank for default ~/.ssh/id_[rd]sa.pub]
    --remove [keyname or all]

Example story:
  heroku create myapp
  heroku clone myapp
  (make changes locally)
  git add .
  git commit -m "changes"
  git push
  heroku update myapp --public true --mode production
EOTXT

command = ARGV.shift.strip.gsub(/:/, '_') rescue ""
if command.length == 0
	puts usage
	exit 1
end

wrapper = Heroku::CommandLine.new
unless wrapper.methods.include? command
	puts "no such method as #{command}, run without arguments for usage"
	exit 2
end

wrapper.execute(command, ARGV)

